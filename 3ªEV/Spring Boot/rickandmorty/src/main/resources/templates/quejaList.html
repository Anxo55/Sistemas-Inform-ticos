<!DOCTYPE html>
<html lang="en">
<head th:replace="~{head(titulo='Listando')}"></head>
<body>

    <header th:insert="~{navegacion}"></header>

    <h1>Lista de quejas</h1>
    <section class="container">
            <div th:each="queja: ${misQuejas}">
                <img th:src="${queja.url}" alt="queja"/>
                <p th:text="${queja.description}"></p>
                <!-- https://www.baeldung.com/thymeleaf-js-function-call -->
                <button th:onclick="deleteQueja(  [[${queja.id}]]  )">‚ùå</button>
            </div>
    </section>
   <script>

        async function deleteQueja(id){
            //console.log('Quieres borarr el meme con id=',id)
            await fetch('/quejas/'+id, {method: 'DELETE'})

            console.log('Queja borrada')
            window.location.replace('/quejas')
        }
   </script>
</body>
</html>